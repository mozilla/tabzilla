/*
   http://www.mozilla.org/MPL/MPL-1.1.html Mozilla Public License 1.1
 @author    Michael Gauthier <mike@silverorange.com>
 @author    Steven Garrity <steven@silverorange.com>
*/
function Tabzilla(){"undefined"!=typeof jQuery&&jQuery?jQuery(document).ready(Tabzilla.init):Tabzilla.run()}Tabzilla.READY_POLL_INTERVAL=40;Tabzilla.readyInterval=null;Tabzilla.jQueryCDNSrc="//www.mozilla.org/media/js/libs/jquery-1.7.1.min.js";Tabzilla.LINK_TITLE={CLOSED:"Mozilla links",OPENED:"Close (Esc)"};
Tabzilla.hasCSSTransitions=function(){var a=document.createElement("div");a.innerHTML='<div style="-webkit-transition: color 1s linear;-moz-transition: color 1s linear;-ms-transition: color 1s linear;-o-transition: color 1s linear;"></div>';var b=void 0!==a.firstChild.style.webkitTransition||void 0!==a.firstChild.style.MozTransition||void 0!==a.firstChild.style.msTransition||void 0!==a.firstChild.style.OTransition;delete a;return b}();
Tabzilla.run=function(){var a=0,b=!1,c=navigator.userAgent,d=c.match(/AppleWebKit\/([^\s]*)/);if(d&&d[1])a=parseInt(d[1],10);else if(d=c.match(/Opera[\s\/]([^\s]*)/),!d||!d[1])(d=c.match(/MSIE\s([^;]*)/))&&d[1]&&(b=!0);if(b)if(self!==self.top)document.onreadystatechange=function(){"complete"==document.readyState&&(document.onreadystatechange=null,Tabzilla.ready())};else{var e=document.createElement("p");Tabzilla.readyInterval=setInterval(function(){try{e.doScroll("left"),clearInterval(Tabzilla.readyInterval),
Tabzilla.readyInterval=null,Tabzilla.ready(),e=null}catch(a){}},Tabzilla.READY_POLL_INTERVAL)}else a&&525>a?Tabzilla.readyInterval=setInterval(function(){var a=document.readyState;if("loaded"==a||"complete"==a)clearInterval(Tabzilla.readyInterval),Tabzilla.readyInterval=null,Tabzilla.ready()},Tabzilla.READY_POLL_INTERVAL):Tabzilla.addEventListener(document,"DOMContentLoaded",Tabzilla.ready)};
Tabzilla.ready=function(){if(!Tabzilla.DOMReady){Tabzilla.DOMReady=!0;var a=function(){Tabzilla.init();Tabzilla.removeEventListener(document,"DOMContentLoaded",Tabzilla.ready)};if("undefined"==typeof jQuery){var b=document.createElement("script");b.type="text/javascript";b.src=Tabzilla.jQueryCDNSrc;document.getElementsByTagName("body")[0].appendChild(b);b.readyState?b.onreadystatechange=function(){("loaded"==b.readyState||"complete"==b.readyState)&&a()}:b.onload=a}else a()}};
Tabzilla.init=function(){Tabzilla.hasCSSTransitions||jQuery.extend(jQuery.easing,{easeInOut:function(a,c,d,e,f){return 1>(c/=f/2)?e/2*c*c+d:-e/2*(--c*(c-2)-1)+d}});Tabzilla.link=document.getElementById("tabzilla");Tabzilla.panel=Tabzilla.buildPanel();var a=document.getElementsByTagName("body")[0];a.insertBefore(Tabzilla.panel,a.firstChild);Tabzilla.addEventListener(Tabzilla.link,"click",function(a){Tabzilla.preventDefault(a);Tabzilla.toggle()});Tabzilla.$panel=jQuery(Tabzilla.panel);Tabzilla.$link=
jQuery(Tabzilla.link);Tabzilla.$panel.addClass("tabzilla-closed");Tabzilla.$link.addClass("tabzilla-closed");Tabzilla.$panel.removeClass("tabzilla-opened");Tabzilla.$link.removeClass("tabzilla-opened");Tabzilla.$panel.attr("tabindex","-1");Tabzilla.$link.attr({role:"button","aria-expanded":"false","aria-controls":Tabzilla.$panel.attr("id"),title:Tabzilla.LINK_TITLE.CLOSED});Tabzilla.opened=!1;jQuery(document).keydown(function(a){27===a.which&&Tabzilla.opened&&Tabzilla.toggle()});Tabzilla.$link.keypress(function(a){32===
a.which&&(Tabzilla.toggle(),Tabzilla.preventDefault(a))});Tabzilla.$panel.keypress(function(a){13===a.which&&(Tabzilla.toggle(),Tabzilla.$link.focus())})};Tabzilla.buildPanel=function(){var a=document.createElement("div");a.id="tabzilla-panel";a.innerHTML=Tabzilla.content;return a};Tabzilla.addEventListener=function(a,b,c){"undefined"!=typeof a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)};
Tabzilla.removeEventListener=function(a,b,c){"undefined"!=typeof a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)};Tabzilla.toggle=function(){Tabzilla.opened?Tabzilla.close():Tabzilla.open()};
Tabzilla.open=function(){Tabzilla.opened||(Tabzilla.hasCSSTransitions?(Tabzilla.$panel.addClass("tabzilla-opened"),Tabzilla.$link.addClass("tabzilla-opened"),Tabzilla.$panel.removeClass("tabzilla-closed"),Tabzilla.$link.removeClass("tabzilla-closed")):jQuery(Tabzilla.panel).animate({height:200},200,"easeInOut").toggleClass("open"),Tabzilla.$link.attr({"aria-expanded":"true",title:Tabzilla.LINK_TITLE.OPENED}),Tabzilla.$panel.focus(),Tabzilla.opened=!0)};
Tabzilla.close=function(){Tabzilla.opened&&(Tabzilla.hasCSSTransitions?(Tabzilla.$panel.removeClass("tabzilla-opened"),Tabzilla.$link.removeClass("tabzilla-opened"),Tabzilla.$panel.addClass("tabzilla-closed"),Tabzilla.$link.addClass("tabzilla-closed")):jQuery(Tabzilla.panel).animate({height:0},200,"easeInOut",function(){$(this).toggleClass("open")}),Tabzilla.$link.attr({"aria-expanded":"false",title:Tabzilla.LINK_TITLE.CLOSED}),Tabzilla.opened=!1)};
Tabzilla.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};Tabzilla.content='<div id="tabzilla-contents">  <div id="tabzilla-promo">    <div class="snippet" id="tabzilla-promo-beta">    <a href="http://www.mozilla.org/firefox/beta/?WT.mc_id=tzfxbeta&amp;WT.mc_ev=click">      <b>Download Firefox Beta</b>, provide feedback and help make the       next version of Firefox even more awesome.</a>    </div>  </div>  <div id="tabzilla-nav">    <ul>      <li><h2>Mozilla</h2>        <ul>          <li><a href="http://www.mozilla.org/mission/">Mission</a></li>          <li><a href="http://www.mozilla.org/about/">About</a></li>          <li><a href="http://www.mozilla.org/projects/">Projects</a></li>          <li><a href="http://support.mozilla.org/">Support</a></li>          <li><a href="https://developer.mozilla.org">Developer Network</a></li>        </ul>      </li>      <li><h2>Products</h2>        <ul>          <li><a href="http://www.mozilla.org/firefox">Firefox</a></li>          <li><a href="http://www.mozilla.org/thunderbird">Thunderbird</a></li>        </ul>      </li>      <li><h2>Innovations</h2>        <ul>          <li><a href="https://webfwd.org/">WebFWD</a></li>          <li><a href="http://mozillalabs.com/">Labs</a></li>        </ul>      </li>      <li><h2>Get Involved</h2>        <ul>          <li><a href="http://www.mozilla.org/contribute/">Volunteer</a></li>          <li><a href="http://www.mozilla.org/en-US/about/careers.html">Careers</a></li>          <li><a href="http://www.mozilla.org/en-US/about/mozilla-spaces/">Find us</a></li>          <li><a href="https://donate.mozilla.org/">Join us</a></li>        </ul>      </li>      <li id="tabzilla-search">        <a href="http://www.mozilla.org/community/directory.html">Website Directory</a>        <form title="Search Mozilla sites" action="http://www.google.com/cse">          <input type="hidden" value="002443141534113389537:ysdmevkkknw" name="cx">          <input type="hidden" value="FORID:0" name="cof">          <label for="q">Search</label>          <input type="search" placeholder="Search" id="q" name="q">        </form>      </li>    </ul>  </div></div>';
Tabzilla();
